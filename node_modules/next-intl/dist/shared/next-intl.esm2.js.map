{"version":3,"file":"next-intl.esm2.js","sources":["../../src/shared/utils.tsx"],"sourcesContent":["import {UrlObject} from 'url';\nimport NextLink from 'next/link';\nimport {ComponentProps} from 'react';\n\ntype Href = ComponentProps<typeof NextLink>['href'];\n\nexport function isRelativeHref(href: Href) {\n  const pathname = typeof href === 'object' ? href.pathname : href;\n  return pathname != null && !pathname.startsWith('/');\n}\n\nexport function isLocalHref(href: Href) {\n  if (typeof href === 'object') {\n    return href.host == null && href.hostname == null;\n  } else {\n    const hasProtocol = /^[a-z]+:/i.test(href);\n    return !hasProtocol;\n  }\n}\n\nexport function localizeHref(\n  href: string,\n  locale: string,\n  defaultLocale: string,\n  pathname: string\n): string;\nexport function localizeHref(\n  href: UrlObject | string,\n  locale: string,\n  defaultLocale: string,\n  pathname: string\n): UrlObject | string;\nexport function localizeHref(\n  href: UrlObject | string,\n  locale: string,\n  defaultLocale: string = locale,\n  pathname: string\n) {\n  if (!isLocalHref(href) || isRelativeHref(href)) {\n    return href;\n  }\n\n  const isSwitchingLocale = locale !== defaultLocale;\n  const isPathnamePrefixed =\n    locale == null || hasPathnamePrefixed(locale, pathname);\n  const shouldPrefix = isPathnamePrefixed || isSwitchingLocale;\n\n  if (shouldPrefix && locale != null) {\n    return prefixHref(href, locale);\n  }\n\n  return href;\n}\n\nexport function prefixHref(href: string, locale: string): string;\nexport function prefixHref(\n  href: UrlObject | string,\n  locale: string\n): UrlObject | string;\nexport function prefixHref(href: UrlObject | string, locale: string) {\n  let prefixedHref;\n  if (typeof href === 'string') {\n    prefixedHref = localizePathname(locale, href);\n  } else {\n    prefixedHref = {...href};\n    if (href.pathname) {\n      prefixedHref.pathname = localizePathname(locale, href.pathname);\n    }\n  }\n\n  return prefixedHref;\n}\n\nexport function unlocalizePathname(pathname: string, locale: string) {\n  return pathname.replace(new RegExp(`^/${locale}`), '') || '/';\n}\n\nexport function localizePathname(locale: string, pathname: string) {\n  let localizedHref = '/' + locale;\n\n  if (pathname !== '/') {\n    localizedHref += pathname;\n  }\n\n  return localizedHref;\n}\n\nexport function hasPathnamePrefixed(locale: string, pathname: string) {\n  const prefix = `/${locale}`;\n  return pathname === prefix || pathname.startsWith(`${prefix}/`);\n}\n"],"names":["isRelativeHref","href","pathname","startsWith","isLocalHref","host","hostname","hasProtocol","test","localizeHref","locale","defaultLocale","isSwitchingLocale","isPathnamePrefixed","hasPathnamePrefixed","shouldPrefix","prefixHref","prefixedHref","localizePathname","_extends","localizedHref","prefix"],"mappings":";;AAMM,SAAUA,cAAcA,CAACC,IAAU,EAAA;EACvC,IAAMC,QAAQ,GAAG,OAAOD,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAAA;EAChE,OAAOC,QAAQ,IAAI,IAAI,IAAI,CAACA,QAAQ,CAACC,UAAU,CAAC,GAAG,CAAC,CAAA;AACtD,CAAA;AAEM,SAAUC,WAAWA,CAACH,IAAU,EAAA;AACpC,EAAA,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IAC5B,OAAOA,IAAI,CAACI,IAAI,IAAI,IAAI,IAAIJ,IAAI,CAACK,QAAQ,IAAI,IAAI,CAAA;AAClD,GAAA,MAAM;AACL,IAAA,IAAMC,WAAW,GAAG,WAAW,CAACC,IAAI,CAACP,IAAI,CAAC,CAAA;AAC1C,IAAA,OAAO,CAACM,WAAW,CAAA;AACpB,GAAA;AACH,CAAA;AAcM,SAAUE,YAAYA,CAC1BR,IAAwB,EACxBS,MAAc,EACdC,aAAA,EACAT,QAAgB,EAAA;AAAA,EAAA,IADhBS,aAAA,KAAA,KAAA,CAAA,EAAA;AAAAA,IAAAA,aAAA,GAAwBD,MAAM,CAAA;AAAA,GAAA;EAG9B,IAAI,CAACN,WAAW,CAACH,IAAI,CAAC,IAAID,cAAc,CAACC,IAAI,CAAC,EAAE;AAC9C,IAAA,OAAOA,IAAI,CAAA;AACZ,GAAA;AAED,EAAA,IAAMW,iBAAiB,GAAGF,MAAM,KAAKC,aAAa,CAAA;EAClD,IAAME,kBAAkB,GACtBH,MAAM,IAAI,IAAI,IAAII,mBAAmB,CAACJ,MAAM,EAAER,QAAQ,CAAC,CAAA;AACzD,EAAA,IAAMa,YAAY,GAAGF,kBAAkB,IAAID,iBAAiB,CAAA;AAE5D,EAAA,IAAIG,YAAY,IAAIL,MAAM,IAAI,IAAI,EAAE;AAClC,IAAA,OAAOM,UAAU,CAACf,IAAI,EAAES,MAAM,CAAC,CAAA;AAChC,GAAA;AAED,EAAA,OAAOT,IAAI,CAAA;AACb,CAAA;AAOgB,SAAAe,UAAUA,CAACf,IAAwB,EAAES,MAAc,EAAA;AACjE,EAAA,IAAIO,YAAY,CAAA;AAChB,EAAA,IAAI,OAAOhB,IAAI,KAAK,QAAQ,EAAE;AAC5BgB,IAAAA,YAAY,GAAGC,gBAAgB,CAACR,MAAM,EAAET,IAAI,CAAC,CAAA;AAC9C,GAAA,MAAM;AACLgB,IAAAA,YAAY,GAAAE,QAAA,CAAOlB,EAAAA,EAAAA,IAAI,CAAC,CAAA;IACxB,IAAIA,IAAI,CAACC,QAAQ,EAAE;MACjBe,YAAY,CAACf,QAAQ,GAAGgB,gBAAgB,CAACR,MAAM,EAAET,IAAI,CAACC,QAAQ,CAAC,CAAA;AAChE,KAAA;AACF,GAAA;AAED,EAAA,OAAOe,YAAY,CAAA;AACrB,CAAA;AAMgB,SAAAC,gBAAgBA,CAACR,MAAc,EAAER,QAAgB,EAAA;AAC/D,EAAA,IAAIkB,aAAa,GAAG,GAAG,GAAGV,MAAM,CAAA;EAEhC,IAAIR,QAAQ,KAAK,GAAG,EAAE;AACpBkB,IAAAA,aAAa,IAAIlB,QAAQ,CAAA;AAC1B,GAAA;AAED,EAAA,OAAOkB,aAAa,CAAA;AACtB,CAAA;AAEgB,SAAAN,mBAAmBA,CAACJ,MAAc,EAAER,QAAgB,EAAA;EAClE,IAAMmB,MAAM,SAAOX,MAAQ,CAAA;EAC3B,OAAOR,QAAQ,KAAKmB,MAAM,IAAInB,QAAQ,CAACC,UAAU,CAAIkB,MAAM,GAAA,GAAG,CAAC,CAAA;AACjE;;;;"}