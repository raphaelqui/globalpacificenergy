"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("intl-messageformat"),e=require("react");function t(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var n,o=t(r),a=t(e);function u(){return u=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},u.apply(this,arguments)}function i(r){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i(r)}function s(r,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},s(r,e)}function c(r,e,t){return c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}()?Reflect.construct.bind():function(r,e,t){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(r,n));return t&&s(o,t.prototype),o},c.apply(null,arguments)}function l(r){var e="function"==typeof Map?new Map:void 0;return l=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(r))return e.get(r);e.set(r,t)}function t(){return c(r,arguments,i(this).constructor)}return t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,r)},l(r)}function f(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)e.indexOf(t=a[n])>=0||(o[t]=r[t]);return o}exports.IntlErrorCode=void 0,(n=exports.IntlErrorCode||(exports.IntlErrorCode={})).MISSING_MESSAGE="MISSING_MESSAGE",n.MISSING_FORMAT="MISSING_FORMAT",n.INSUFFICIENT_PATH="INSUFFICIENT_PATH",n.INVALID_MESSAGE="INVALID_MESSAGE",n.INVALID_KEY="INVALID_KEY",n.FORMATTING_ERROR="FORMATTING_ERROR";var m=function(r){var e,t;function n(e,t){var n,o=e;return t&&(o+=": "+t),(n=r.call(this,o)||this).code=void 0,n.originalMessage=void 0,n.code=e,t&&(n.originalMessage=t),n}return t=r,(e=n).prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t),n}(l(Error));function v(r,e){return r?Object.keys(r).reduce((function(t,n){return t[n]=u({timeZone:e},r[n]),t}),{}):r}function d(r){return[r.namespace,r.key].filter((function(r){return null!=r})).join(".")}function p(r){console.error(r)}function E(r,e,t){if(!r)throw new Error(void 0);var n=r;return e.split(".").forEach((function(r){var e=n[r];if(null==r||null==e)throw new Error(void 0);n=e})),n}function g(r){var e=r.messages,t=r.namespace,n=r.onError,o=void 0===n?p:n;try{if(!e)throw new Error(void 0);var a=t?E(e,t):e;if(!a)throw new Error(void 0);return a}catch(r){var u=new m(exports.IntlErrorCode.MISSING_MESSAGE,r.message);return o(u),u}}function I(r){var t=r.cachedFormatsByLocale,n=r.defaultTranslationValues,a=r.formats,i=r.getMessageFallback,s=void 0===i?d:i,c=r.locale,l=r.messagesOrError,f=r.namespace,p=r.onError,g=r.timeZone;function I(r,e,t){var n=new m(e,t);return p(n),s({error:n,key:r,namespace:f})}function y(r,i,d){var p;if(l instanceof m)return s({error:l,key:r,namespace:f});var y,M=l;try{y=E(M,r)}catch(e){return I(r,exports.IntlErrorCode.MISSING_MESSAGE,e.message)}var h,w=[f,r,String(y)].filter((function(r){return null!=r})).join(".");if(null!=t&&null!=(p=t[c])&&p[w])h=null==t?void 0:t[c][w];else{if("object"==typeof y)return I(r,Array.isArray(y)?exports.IntlErrorCode.INVALID_MESSAGE:exports.IntlErrorCode.INSUFFICIENT_PATH,void 0);try{h=new o.default(y,c,function(r,e){var t=e?u({},r,{dateTime:v(r.dateTime,e)}):r;return u({},t,{date:null==t?void 0:t.dateTime,time:null==t?void 0:t.dateTime})}(u({},a,d),g))}catch(e){return I(r,exports.IntlErrorCode.INVALID_MESSAGE,e.message)}t&&(t[c]||(t[c]={}),t[c][w]=h)}try{var S=h.format(function(r){if(0!==Object.keys(r).length){var t={};return Object.keys(r).forEach((function(n){var o=0,a=r[n];t[n]="function"==typeof a?function(r){var t=a(r);return e.isValidElement(t)?e.cloneElement(t,{key:n+o++}):t}:a})),t}}(u({},n,i)));if(null==S)throw new Error(void 0);return e.isValidElement(S)||Array.isArray(S)||"string"==typeof S?S:String(S)}catch(e){return I(r,exports.IntlErrorCode.FORMATTING_ERROR,e.message)}}function M(r,e,t){var n=y(r,e,t);return"string"!=typeof n?I(r,exports.IntlErrorCode.INVALID_MESSAGE,void 0):n}return M.rich=y,M.raw=function(r){if(l instanceof m)return s({error:l,key:r,namespace:f});var e=l;try{return E(e,r)}catch(e){return I(r,exports.IntlErrorCode.MISSING_MESSAGE,e.message)}},M}function y(r,e){return r===e?void 0:r.slice((e+".").length)}var M=["getMessageFallback","messages","namespace","onError"],h=["getMessageFallback","messages","namespace","onError"],w=60,S=60*w,b=24*S,T=7*b,O=b*(365/12),F=365*b;function x(r){var e=r.formats,t=r.locale,n=r.now,o=r.onError,a=void 0===o?p:o,i=r.timeZone;function s(r,e,t,n){var o;try{o=function(r,e){var t;if("string"==typeof e){if(!(t=null==r?void 0:r[e])){var n=new m(exports.IntlErrorCode.MISSING_FORMAT,void 0);throw a(n),n}}else t=e;return t}(t,e)}catch(e){return String(r)}try{return n(o)}catch(e){return a(new m(exports.IntlErrorCode.FORMATTING_ERROR,e.message)),String(r)}}return{dateTime:function(r,n){return s(r,n,null==e?void 0:e.dateTime,(function(e){var n;return!i||null!=(n=e)&&n.timeZone||(e=u({},e,{timeZone:i})),new Intl.DateTimeFormat(t,e).format(r)}))},number:function(r,n){return s(r,n,null==e?void 0:e.number,(function(e){return new Intl.NumberFormat(t,e).format(r)}))},relativeTime:function(r,e){try{if(!e){if(!n)throw new Error(void 0);e=n}var o=r instanceof Date?r:new Date(r),u=e instanceof Date?e:new Date(e),i=function(r){var e,t,n=Math.abs(r);return n<w?(t="second",e=Math.round(r)):n<S?(t="minute",e=Math.round(r/w)):n<b?(t="hour",e=Math.round(r/S)):n<T?(t="day",e=Math.round(r/b)):n<O?(t="week",e=Math.round(r/T)):n<F?(t="month",e=Math.round(r/O)):(t="year",e=Math.round(r/F)),{value:e,unit:t}}((o.getTime()-u.getTime())/1e3),s=i.unit,c=i.value;return new Intl.RelativeTimeFormat(t,{numeric:"auto"}).format(c,s)}catch(e){return a(new m(exports.IntlErrorCode.FORMATTING_ERROR,e.message)),String(r)}},list:function(r,n){return s(r,n,null==e?void 0:e.list,(function(e){return new Intl.ListFormat(t,e).format(r)}))}}}function R(){var r=x.apply(void 0,arguments);return{formatDateTime:r.dateTime,formatNumber:r.number,formatRelativeTime:r.relativeTime}}var _=e.createContext(void 0),A=["getMessageFallback","messages","onError"];function N(r){var e=r.getMessageFallback,t=r.messages,n=r.onError;return u({},f(r,A),{messages:t,onError:n||p,getMessageFallback:e||d})}var G=["children"];function k(){var r=e.useContext(_);if(!r)throw new Error(void 0);return r}function j(){return new Date}var C=!1;exports.IntlError=m,exports.IntlProvider=function(r){var e=r.children,t=f(r,G);return a.default.createElement(_.Provider,{value:N(t)},e)},exports.createFormatter=x,exports.createIntl=R,exports.createTranslator=function(r){var e=r.getMessageFallback,t=void 0===e?d:e,n=r.messages,o=r.namespace,a=r.onError,i=void 0===a?p:a;return function(r,e){var t=r.getMessageFallback,n=r.messages,o=r.namespace,a=r.onError,i=f(r,M);n=n["!"],o=y(o,"!");var s=I(u({},i,{onError:a,getMessageFallback:t,messagesOrError:g({messages:n,namespace:o,onError:a})})),c=s.rich;function l(){return s.apply(void 0,arguments)}return l.rich=function(r,e,n){var u=c(r,e,n);if("string"!=typeof u){var i=new m(exports.IntlErrorCode.FORMATTING_ERROR,void 0);return a(i),t({error:i,key:r,namespace:o})}return u},l.raw=s.raw,l}(u({},f(r,h),{onError:i,getMessageFallback:t,messages:{"!":n},namespace:o?"!."+o:"!"}))},exports.useFormatter=function(){var r=k(),t=r.formats,n=r.locale,o=r.now,a=r.onError,u=r.timeZone;return e.useMemo((function(){return x({formats:t,locale:n,now:o,onError:a,timeZone:u})}),[t,o,n,a,u])},exports.useIntl=function(){var r=k(),t=r.formats,n=r.locale,o=r.now,a=r.onError,u=r.timeZone;return C||(C=!0,console.warn("`useIntl()` is deprecated and will be removed in the next major version. Please switch to `useFormatter()`.")),e.useMemo((function(){return R({formats:t,locale:n,now:o,onError:a,timeZone:u})}),[t,o,n,a,u])},exports.useLocale=function(){return k().locale},exports.useMessages=function(){return k().messages},exports.useNow=function(r){var t=null==r?void 0:r.updateInterval,n=k().now,o=e.useState(n||j()),a=o[0],u=o[1];return e.useEffect((function(){if(t){var r=setInterval((function(){u(j())}),t);return function(){clearInterval(r)}}}),[n,t]),a},exports.useTimeZone=function(){return k().timeZone},exports.useTranslations=function(r){return function(r,t,n){var o=k(),a=o.defaultTranslationValues,u=o.formats,i=o.getMessageFallback,s=o.locale,c=o.onError,l=o.timeZone;r=r["!"],t=y(t,"!");var f=e.useRef({}),m=e.useMemo((function(){return g({messages:r,namespace:t,onError:c})}),[r,t,c]);return e.useMemo((function(){return I({cachedFormatsByLocale:f.current,getMessageFallback:i,messagesOrError:m,defaultTranslationValues:a,namespace:t,onError:c,formats:u,locale:s,timeZone:l})}),[i,m,a,t,c,u,s,l])}({"!":k().messages},r?"!."+r:"!")};
//# sourceMappingURL=use-intl.cjs.production.min.js.map
